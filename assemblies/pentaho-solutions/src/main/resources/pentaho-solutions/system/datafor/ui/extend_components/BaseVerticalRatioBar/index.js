"use strict";function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _defineProperty(e,t,r){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"===_typeof(t)?t:String(t)}function _toPrimitive(e,t){if("object"!==_typeof(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}define("BaseVerticalRatioBar",["Utility","utility/runtime","underscore","echartbase/RatioStackAreachart","echartbase/EchartsBase","ui/extendIconUI","Base.Panel","echartbase/EchartsBase.Panel","echartbase/BaseLinechart"],(function(e,t,r,a,o,n,i,l,s){var c=new i,p="BaseVerticalRatioBar",y=a.getLocaleFn(["components","extends",p]),u=a.crossLegendName,m=a.extend({type:p,name:y("component name"),description:y("component desc"),dataFormatter:function(e,t,r,n,i){var l;a.prototype.dataFormatter.apply(this,Array.prototype.slice.call(arguments,0)),null===(l=this.options.series)||void 0===l||l.forEach((function(e){e.type="bar"})),this.options.legend=_objectSpread(_objectSpread({},this.options.legend||{}),{},{icon:"rect"});var s,c;return s=this.options.xAxis,c=this.options,s.type="category",s.boundaryGap=!0,c.series.forEach((function(e){Array.isArray(e.data)&&e.data.forEach((function(e){e.value=e.fullValue.length?e.fullValue[1]:void 0}))})),s.inverse=!1,delete s.min,delete s.max,o.prototype.dataFormatter.apply(this,Array.prototype.slice.call(arguments,0)),this.options.styleProperties=_objectSpread(_objectSpread({},this.options.styleProperties||{}),{},{isRatioStackMode:!0}),this},render:function(){var e=this;return this.options.yAxis=_objectSpread(_objectSpread({},this.options.yAxis),{},{axisLabel:_objectSpread(_objectSpread({},this.options.yAxis.axisLabel||{}),{},{formatter:"{value}%"}),axisMax:100,max:100,type:"value"}),this.options.series.forEach((function(r){var a,o=e.options.dataforDataLabelType;r.barMaxWidth=t.getChartPlotBarMaxWidth(),r.label=_objectSpread(_objectSpread({},r.label||{}),{},{normal:_objectSpread(_objectSpread({},(null===(a=r.label)||void 0===a?void 0:a.normal)||{}),{},{formatter:"value"==o?function(e){var t;return null==e||null===(t=e.data)||void 0===t?void 0:t.formatted}:"{c}%"})})})),s.prototype.render.apply(this,Array.prototype.slice.call(arguments,0))},applyHighlight:function(){return s.prototype.applyHighlight.apply(this,Array.prototype.slice.call(arguments,0))}},{_sort_order:4.2,logo:n.getGeneralIcon({},'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="none" version="1.1" width="22" height="20" viewBox="0 0 22 20"><g><g transform="matrix(-1,-5.2146120310681e-8,5.2146120310681e-8,-1,43.99999953068492,18.000001147214647)" style="opacity:0.30000001192092896;"><rect x="22" y="9" width="4" height="9" rx="0" fill="#0070DF" fill-opacity="0.5"/></g><g transform="matrix(-1,-5.2146120310681e-8,5.2146120310681e-8,-1,19.9999997392694,10.000000521461203)" style="opacity:0.30000001192092896;"><rect x="10" y="5" width="4" height="5" rx="0" fill="#0070DF" fill-opacity="0.5"/></g><g transform="matrix(-1,-5.2146120310681e-8,5.2146120310681e-8,-1,43.999998957077594,40.00000114721465)"><rect x="22" y="20" width="4" height="11" rx="0" fill="#0070DF" fill-opacity="1"/></g><g transform="matrix(-1,-5.2146120310681e-8,5.2146120310681e-8,-1,19.999998957077594,40.0000005214612)"><rect x="10" y="20" width="4" height="15" rx="0" fill="#0070DF" fill-opacity="1"/></g><g transform="matrix(-1,-5.2146120310681e-8,5.2146120310681e-8,-1,31.999998957077594,40.000000834337925)"><rect x="16" y="20" width="4" height="6" rx="0" fill="#FFA800" fill-opacity="1"/></g><g transform="matrix(-1,-5.2146120310681e-8,5.2146120310681e-8,-1,7.999998957077594,40.00000020858448)"><rect x="4" y="20" width="4" height="11" rx="0" fill="#FFA800" fill-opacity="1"/></g><g transform="matrix(-1,-5.2146120310681e-8,5.2146120310681e-8,-1,31.999999269954316,28.000000834337925)" style="opacity:0.30000001192092896;"><rect x="16" y="14" width="4" height="14" rx="0" fill="#FFA800" fill-opacity="1"/></g><g transform="matrix(-1,-5.2146120310681e-8,5.2146120310681e-8,-1,7.999999530684917,18.00000020858448)" style="opacity:0.30000001192092896;"><rect x="4" y="9" width="4" height="9" rx="0" fill="#FFA800" fill-opacity="1"/></g></g></svg>',"0.75em"),privates:_objectSpread(_objectSpread({},a.privates),{},{skipBuildDetailObject:!0,chartTypeSimilar:a.prototype.type}),symbol:function(){return"".concat(e.getWebAppName(),"/content/datafor/ui/extend_components/").concat(p,"/thumbnail.svg?_t=").concat(e.getStartupTimestamp())},thumbnail:"icon iconfont icon-datafor-mianjitu",staticPanelOptions:r.extend([],[{name:"data",label:e.locale("panel","data"),active:!0,datasets:[c.datasource(),c.line(),c.enhanceDimensionPrimary(e.locale("components","echarts","stack area","primary dimension"),null,1,e.locale("components","echarts","stack area","primary dimension desc")),c.enhanceDimensionPrimary(e.locale("panel","sub dimension"),"single",!1,null,["measures"],null,u,!0),c.enhanceMeasures(null,null,u),c.line()].concat(_toConsumableArray(c.getExtroDataOptionsGroup()),[c.line(),c.dimensionDate(),c.line(),c.filters()])},{name:"style",label:e.locale("panel","styles"),active:!1,datasets:[].concat(_toConsumableArray(c.getComponentCaptionGroup()),[c.line()],_toConsumableArray(c.getComponentFramesetGroup()),[c.line()],_toConsumableArray(l.getBarchartStyleGroup()),[c.line()],_toConsumableArray(l.getDataPointLabelGroup().concat([{type:"SingleSelect",name:"data.label.type",label:y("label content type"),tooltip:y("label content type desc"),available:[{value:"value",label:y("show original value")},{value:"percent",label:y("show percent value")}],value:["percent"],search:!1,execute:function(e){var t=Array.isArray(e)?e[0]:e;this.options.dataforDataLabelType=t}}])),[c.line()],_toConsumableArray(l.getCategoriedAxisXGroup()),[c.line()],_toConsumableArray(l.getNormalValueAxisYGroup(null,!0,(function(){return this.model.getMeasures().trimSimiMeasures().map((function(e){return e.label})).join("~")}))),[c.line()],_toConsumableArray(l.getGridLineGroup(!0)),[c.line()],_toConsumableArray(l.getLegendGroup()),[c.line()],_toConsumableArray(l.getNumericAxisZoomControlGroup()),[c.line()],_toConsumableArray(c.getComponentToolbarGroup()))},{name:"action",label:e.locale("panel","actions"),datasets:[c.label(e.locale("panel","action panel","refresh")),c.refresh(),c.period(),c.line(),c.label(e.locale("panel","action panel","custom blocks")),l.clickPlotEvent(),c.preExecution(),c.preFetch()]}])});return a.register(m),m}));
//# sourceMappingURL=BaseVerticalRatioBar.js.map