"use strict";function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=new Array(t);o<t;o++)n[o]=e[o];return n}function ownKeys(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(o),!0).forEach((function(t){_defineProperty(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ownKeys(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_toPropertyKey(n.key),n)}}function _createClass(e,t,o){return t&&_defineProperties(e.prototype,t),o&&_defineProperties(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_setPrototypeOf(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var o,n=_getPrototypeOf(e);if(t){var r=_getPrototypeOf(this).constructor;o=Reflect.construct(n,arguments,r)}else o=n.apply(this,arguments);return _possibleConstructorReturn(this,o)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_getPrototypeOf(e)}function _classPrivateFieldInitSpec(e,t,o){_checkPrivateRedeclaration(e,t),t.set(e,o)}function _checkPrivateRedeclaration(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _defineProperty(e,t,o){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"===_typeof(t)?t:String(t)}function _toPrimitive(e,t){if("object"!==_typeof(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function _classPrivateFieldGet(e,t){return _classApplyDescriptorGet(e,_classExtractFieldDescriptor(e,t,"get"))}function _classExtractFieldDescriptor(e,t,o){if(!t.has(e))throw new TypeError("attempted to "+o+" private field on non-instance");return t.get(e)}function _classApplyDescriptorGet(e,t){return t.get?t.get.call(e):t.value}define("QueriedSearchInput",["BaseFlatFilterClass","Utility","ui/extendIconUI","utility/colors","Base.Panel"],(function(e,t,o,n,r){var i=t.getReactExport("antdUI"),a=t.getReactExport("React"),l=i.Input.Search,c=new r,u={size:"large",background:"#fff",buttonContentType:"icon",placeholderColor:"#999",searchBorder:[1,"#d9d9d9","solid"],font:{color:"#666",fontSize:13,fontFamily:"sans-serif",fontWeight:!1,fontStyle:!1},buttonFont:{color:"#fff",fontSize:13,fontFamily:"sans-serif",fontWeight:!1,fontStyle:!1},searchDelay:2e3,ellipse:!1,showSearchButton:!0,multipleSearch:!0},s=function(e){return"".concat(e.fontStyle?"italic":""," ").concat(e.fontWeight?"bold":""," ").concat(e.fontSize,"px ").concat(e.fontFamily)},p=new WeakMap,f=new WeakMap,d=function(e){_inherits(r,e);var o=_createSuper(r);function r(){var e;_classCallCheck(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return _classPrivateFieldInitSpec(_assertThisInitialized(e=o.call.apply(o,[this].concat(i))),p,{writable:!0,value:function(t){e.toUpdateSelectedKeys([t]),_classPrivateFieldGet(_assertThisInitialized(e),f).call(_assertThisInitialized(e),{target:{value:t}},!0)}}),_classPrivateFieldInitSpec(_assertThisInitialized(e),f,{writable:!0,value:function(o,n){var r,i=e.model.getCustomizations()||{},a=i["action.search.auto.commit.delay"],l=void 0===a?u.searchDelay:a,c=i["action.search.auto.commit"],s=null===(r=o.target)||void 0===r?void 0:r.value;e.tryUpdateStatus(["query","keyword"],s),c&&!n?t.debounceExecute((function(t){e.toUpdateSelectedKeys([t])}),_assertThisInitialized(e),[s],n?0:l,"search_".concat(e.id)):e.toUpdateSelectedKeys([s],!0)}}),e.silent=!0,e}return _createClass(r,[{key:"onApplyPrivateStyle",value:function(e){var t=e.style,o=void 0===t?{}:t,r=o.placeholderColor,i=void 0===r?u.placeholderColor:r,a=o.background,l=void 0===a?u.background:a,c=o.buttonBackground,p=void 0===c?n.primaryBlueColor():c,f=o.font,d=void 0===f?_objectSpread({},u.font):f,h=o.buttonFont,y=void 0===h?_objectSpread({},u.buttonFont):h,b=o.searchBorder,m=void 0===b?u.searchBorder:b,v=o.ellipse,g=void 0===v?u.ellipse:v,S=o.showSearchButton,_=void 0===S?u.showSearchButton:S,w=o.size,L=void 0===w?u.size:w,x=o.buttonContent,C=g?"30px":"0px",P="icon"==(void 0===x?u.buttonContentType:x);return"\n        width: 100%;\n        padding: 0px 3px;\n        & {\n          .ant-input-group{\n            height: 100%;\n            .ant-input{\n              height: ".concat("small"==L?24:"large"==L?40:32,"px;\n              border: ").concat(parseFloat(m[0]),"px ").concat(m[2]," ").concat(m[1],"!important;\n              font: ").concat(s(d),";\n              color: ").concat(d.color,";\n              background-color: ").concat(l,";\n              border-radius: ").concat(_?"".concat(C," 0px 0px ").concat(C):"".concat(C),"!important; \n            }\n            .ant-input::placeholder{\n              color: ").concat(i,";\n            }\n            .ant-input-group-addon{\n              display: ").concat(_?"table-cell":"none",";\n              background: transparent!important;\n              button.ant-btn{\n                background-color: ").concat(p,"!important;\n                border: ").concat(parseFloat(m[0]),"px ").concat(m[2]," ").concat(m[1],"!important;\n                border-left-width: 0px!important;\n                border-radius: ").concat(g?"0px ".concat(C," ").concat(C," 0px"):"0px","!important;\n                box-shadow: none!important;\n                span {\n                  font: ").concat(s(y),"!important;\n                  color: ").concat(y.color,"!important;\n                  display: ").concat(P?"flex":"inline-block",";\n                  svg{\n                    font: inherit;\n                  }\n                }\n              }\n            }\n          }\n        } \n      ")}},{key:"toUpdateSelectedKeys",value:function(e,t){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=Array.from(new Set(e));this.model.defaultValueUpdated(n),o||this.tryUpdateStatus(["timestamp"],Date.now()),t||this.model.fireUpdate()}},{key:"onNotQueryRequiredValidationCheck",value:function(){var e;return null===(e=this.model)||void 0===e?void 0:e.isValidQueryModel()}},{key:"render",value:function(){var e=this.options,t=e.style,o=void 0===t?{}:t,n=e.query,r=void 0===n?{}:n,i=o.size,c=void 0===i?u.size:i,s=o.buttonContent,d=void 0===s?u.buttonContent:s,h=o.placeholderContent,y=void 0===h?null:h,b=null==r?void 0:r.keyword,m=y;return null===m&&(m=this.toLocale("input your keyword")),a.createElement("div",null,a.createElement(l,{placeholder:m,enterButton:"icon"==d||this.toLocale("search action"),size:c,defaultValue:b,onSearch:_classPrivateFieldGet(this,p),onChange:_classPrivateFieldGet(this,f)}))}}],[{key:"instanceStatusDef",value:function(e){var t,o=(null===(t=this.model)||void 0===t?void 0:t.getDefaultsValue().value)||[],n=null==o?void 0:o[0];return{style:{size:u.size,background:u.background,placeholderColor:u.placeholderColor,searchBorder:u.searchBorder,font:_objectSpread({},u.font),buttonFont:_objectSpread({},u.buttonFont),ellipse:u.ellipse,showSearchButton:u.showSearchButton},query:{keyword:n}}}}]),r}(e);return _defineProperty(d,"type","QueriedSearchInput"),d.extendComponentModelProperties({customQuery:function(e){e({raw:[],data:[],details:null,json:{error:null}})},trySetQuery:function(e,t,o){var n=this.getCustomizations()||{},r=n["action.search.multiple"],i=void 0===r?u.multipleSearch:r,a=n["action.search.multiple.separator"],l=void 0===a?["space"]:a,c=n["action.multiple.join.type"],s=void 0===c?["and"]:c,p=t||{},f=p.hierarchy,d=p.level,h=p.value,y=(void 0===h?[]:h).filter((function(e){return"0"===String(e)||"false"===String(e)||!!e})),b="";if(f&&d&&null!=y&&y.length){var m;if(i){var v=(null==l?void 0:l[0])||" ";v="slash"==v?"/":" ",m=String(y[0]).split(v).map((function(e){return String(e).trim()})).filter((function(e){return!!e||0===String(e)})).map((function(e){return"(?i).*".concat(e,".*")})),b="and"==(null==s?void 0:s[0])?"".concat(m.map((function(e){return"".concat(t.hierarchy,'.CurrentMember.Caption MATCHES "').concat(e,'"')})).join(" AND ")):"".concat(m.map((function(e){return"".concat(t.hierarchy,'.CurrentMember.Caption MATCHES "').concat(e,'"')})).join(" OR "))}else m=y[0],b="".concat(t.hierarchy,'.CurrentMember.Caption MATCHES "').concat(m);e.toUpdateFilterAxisLevelFilter({hierarchyName:f,levelName:d,expression:b})}}}),d.defineSolidifiedPanels(_toConsumableArray(c.getFilterComponentDataPanelGroup().filter((function(e){return"filter"!=e.name})).slice(0,3)),[].concat(_toConsumableArray(d.getGeneralPanelGroup("caption",!0).map((function(e){return"title.on"==e.name&&(e.value=!1),e})).filter((function(e){var t=e.name;return["title.align","title.background"].indexOf(t)<0}))),[c.label((function(){return this.toLocale("search theme")})),{type:"SingleSelect",name:"search.size",available:[{value:"small",label:function(){return this.toLocale("search.size.small")}},{value:"middle",label:function(){return this.toLocale("search.size.middle")}},{value:"large",label:function(){return this.toLocale("search.size.large")}}],value:[u.size],singleRequireSelected:!0,search:!1,queried:!1,label:function(){return this.toLocale("search.size")},tooltip:function(){return this.toLocale("search.size.desc")},execute:function(e){this.tryUpdateStatus(["style","size"],null==e?void 0:e[0])}},{type:"RadioBox",name:"ellipse.theme.type",label:function(){return this.toLocale("ellipse.type")},tooltip:function(){return this.toLocale("ellipse.type.desc")},value:!1,queried:!1,execute:function(e){this.tryUpdateStatus(["style","ellipse"],!!e)}},c.line(),c.label((function(){return this.toLocale("search.box.style")})),{type:"Font",name:"search.font",label:function(){return this.toLocale("search.box.font")},queried:!1,value:[u.font.fontSize,u.font.color,u.font.fontFamily,u.font.fontWeight,u.font.fontStyle],bold:!0,sizes:t.getLineSizeArray(4,48).map((function(e){return e.id})),italic:!0,tooltip:function(){return this.toLocale("search.box.font.desc")},execute:function(e,t,o){var n={color:e[1],fontSize:Number(e[0]),fontFamily:e[2],fontWeight:e[3],fontStyle:e[4]};this.tryUpdateStatus(["style","font"],n)}},{type:"Border",name:"search.border",queried:!1,value:u.searchBorder,label:function(){return this.toLocale("search.box.border")},tooltip:function(){return this.toLocale("search.box.border.desc")},execute:function(e){this.tryUpdateStatus(["style","searchBorder"],e)}},{type:"ColorPicker",name:"search.background.color",queried:!1,value:u.background,label:function(){return this.toLocale("search.box.background")},tooltip:function(){return this.toLocale("search.box.background.desc")},execute:function(e){this.tryUpdateStatus(["style","background"],e)}},{type:"ColorPicker",name:"placeholder.color",queried:!1,value:u.placeholderColor,label:function(){return this.toLocale("placeholder.color")},tooltip:function(){return this.toLocale("placeholder.color.desc")},execute:function(e){this.tryUpdateStatus(["style","placeholderColor"],e)}},{type:"TextInput",name:"placeholder.content",value:null,queried:!1,label:function(){return this.toLocale("placeholder.content")},tooltip:function(){return this.toLocale("placeholder.content.desc")},execute:function(e,t,o){this.tryUpdateStatus(["style","placeholderContent"],e)}},c.line(),c.label((function(){return this.toLocale("search.button")})),{type:"RadioBox",name:"show.search.button",label:function(){return this.toLocale("search.button.shown")},tooltip:function(){return this.toLocale("search.button.shown.desc")},value:u.showSearchButton,queried:!1,execute:function(e){this.tryUpdateStatus(["style","showSearchButton"],!!e)}},{type:"SingleSelect",name:"search.button.content",label:function(){return this.toLocale("search.button.content")},tooltip:function(){return this.toLocale("search.button.content.desc")},available:[{value:"icon",label:function(){return this.toLocale("search.button.content.type.icon")}},{value:"label",label:function(){return this.toLocale("search.button.content.type.label")}}],value:[u.buttonContentType],queried:!1,execute:function(e){this.tryUpdateStatus(["style","buttonContent"],null==e?void 0:e[0])}},{type:"Font",name:"button.font",label:function(){return this.toLocale("search.button.font")},value:[u.buttonFont.fontSize,u.buttonFont.color,u.buttonFont.fontFamily,u.buttonFont.fontWeight,u.buttonFont.fontStyle],queried:!1,bold:!0,sizes:t.getLineSizeArray(4,48).map((function(e){return e.id})),italic:!0,tooltip:function(){return this.toLocale("search.button.font.desc")},execute:function(e,t,o){var n={color:e[1],fontSize:Number(e[0]),fontFamily:e[2],fontWeight:e[3],fontStyle:e[4]};this.tryUpdateStatus(["style","buttonFont"],n)}},{type:"ColorPicker",name:"button.background",queried:!1,value:n.primaryBlueColor(),label:function(){return this.toLocale("search.button.background")},tooltip:function(){return this.toLocale("search.button.background.desc")},execute:function(e){this.tryUpdateStatus(["style","buttonBackground"],e)}}]),[].concat(_toConsumableArray(c.getFilterComponentActionPanelGroup().slice(0,3)),[c.label((function(){return this.toLocale("auto.commit.options")})),{type:"RadioBox",name:"search.auto.commit",label:function(){return this.toLocale("auto.commit.enable")},tooltip:function(){return this.toLocale("auto.commit.enable.desc")},value:!1,execute:function(e){}},{type:"Slider",name:"search.auto.commit.delay",toListen:["search.auto.commit"],chainLinker:function(e,t,o){var n=e.name,r=e.value;"search.auto.commit"==n&&(r?t.show():t.hide())},label:function(){return this.toLocale("commit.delay")},tooltip:function(){return this.toLocale("commit.delay.desc")},value:u.searchDelay,min:0,max:1e4,step:100,formatter:function(e){return"".concat(e,"ms")},init:function(e,t,o,n){var r=this.model.getCustomizations()||{},i=r["action.search.auto.commit"],a=r["action.search.auto.commit.delay"],l=void 0===a?u.searchDelay:a;return i?null==o||o.show():null==o||o.hide(),l}},c.line(),c.label((function(){return this.toLocale("multiple.keywords.options")})),{type:"RadioBox",name:"search.multiple",label:function(){return this.toLocale("multiple.keywords.enable")},tooltip:function(){return this.toLocale("multiple.keywords.enable.desc")},value:u.multipleSearch,execute:function(e,t,o,n){null!=n&&e!=n&&((this.model.getDefaultsValue().value||[]).length&&this.model.fireUpdate())}},{type:"SingleSelect",name:"search.multiple.separator",label:function(){return this.toLocale("keywords.seperator")},tooltip:function(){return this.toLocale("keywords.seperator.desc")},toListen:["search.multiple"],chainLinker:function(e,t,o){var n=e.name,r=e.value;"search.multiple"==n&&(r?t.show():t.hide())},execute:function(e,t,o,n){e&&n&&e.join("")!=n.join("")&&((this.model.getDefaultsValue().value||[]).length&&this.model.fireUpdate())},value:["space"],singleRequireSelected:!0,search:!1,available:[{value:"slash",label:function(){return this.toLocale("keywrods.seperator.slash")}},{value:"space",label:function(){return this.toLocale("keywords.seperator.space")}}],init:function(e,t,o,n){var r=this.model.getCustomizations()||{},i=r["action.search.multiple"],a=void 0===i?u.multipleSearch:i,l=r[null==t?void 0:t.fullKey],c=void 0===l?["space"]:l;return a?null==o||o.show():null==o||o.hide(),c}},{type:"SingleSelect",name:"multiple.join.type",label:function(){return this.toLocale("multiple.join.type")},tooltip:function(){return this.toLocale("multiple.join.type.desc")},toListen:["search.multiple"],value:["and"],singleRequireSelected:!0,search:!1,available:[{value:"and",label:function(){return this.toLocale("multiple.join.type.and")}},{value:"or",label:function(){return this.toLocale("multiple.join.type.or")}}],execute:function(e,t,o,n){e&&n&&e.join("")!=n.join("")&&((this.model.getDefaultsValue().value||[]).length&&this.model.fireUpdate())},init:function(e,t,o,n){var r=this.model.getCustomizations()||{},i=r["action.search.multiple"],a=void 0===i?u.multipleSearch:i,l=r[null==t?void 0:t.fullKey],c=void 0===l?["and"]:l;return a?null==o||o.show():null==o||o.hide(),c}}])),d.extendComponentModelProperties({cubeMetaRequired:!0}),d.registerComponent({name:function(){return this.toLocale("component name")},tooltip:function(){return this.toLocale("component tooltip")},desc:function(){return this.toLocale("component desc")},version:"1.0.0",classify:"_filter",icon:d.generateSvgICON('<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="none" version="1.1" width="25" height="21" viewBox="0 0 25 21"><g><g><path d="M17.260906249999998,14.37026728515625Q18.45220625,12.63690728515625,18.45220625,10.40856728515625Q18.45220625,7.47208728515625,16.38340625,5.39510728515625Q14.31305625,3.31646728515625,11.384286249999999,3.31646728515625Q8.45550625,3.31646728515625,6.38513625,5.39510728515625Q4.31640625,7.47208728515625,4.31640625,10.40856728515625Q4.31640625,13.34506728515625,6.38513625,15.42206728515625Q8.45550625,17.50066728515625,11.384286249999999,17.50066728515625Q13.99051625,17.50066728515625,15.91700625,15.85466728515625Q15.92200625,15.85886728515625,15.92710625,15.86306728515625L18.86580625,18.273167285156248Q19.00000625,18.38316728515625,19.163306249999998,18.44156728515625Q19.326606249999998,18.499967285156252,19.50000625,18.499967285156252L19.50150625,18.499967285156252Q19.61220625,18.49986728515625,19.72030625,18.47546728515625Q19.82830625,18.45106728515625,19.928406250000002,18.40356728515625Q20.02840625,18.35616728515625,20.115706250000002,18.28796728515625Q20.20300625,18.21976728515625,20.27320625,18.134167285156252Q20.38320625,18.00006728515625,20.44160625,17.83676728515625Q20.50000625,17.67346728515625,20.50000625,17.499967285156252L20.50000625,17.49796728515625Q20.49990625,17.44976728515625,20.49510625,17.40166728515625Q20.47560625,17.20366728515625,20.38180625,17.02836728515625Q20.28790625,16.85296728515625,20.134106250000002,16.72676728515625L17.260906249999998,14.37026728515625ZM14.96640625,6.80649728515625Q16.45220625,8.29818728515625,16.45220625,10.40856728515625Q16.45220625,12.51894728515625,14.96640625,14.01066728515625Q13.48229625,15.50066728515625,11.384286249999999,15.50066728515625Q9.28626625,15.50066728515625,7.8021562499999995,14.01066728515625Q6.31640625,12.51894728515625,6.31640625,10.40856728515625Q6.31640625,8.29817728515625,7.8021562499999995,6.80649728515625Q9.28626625,5.31646728515625,11.384286249999999,5.31646728515625Q13.48229625,5.31646728515625,14.96640625,6.80649728515625Z" fill-rule="evenodd" fill="#FAAD14" fill-opacity="1"/></g></g></svg>',1.1,1.1),orderIndex:12,queryRequired:!0,editPointEventNone:!0,filterable:!0}),d}));
//# sourceMappingURL=QueriedSearchInput.js.map