"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,_toPropertyKey(r.key),r)}}function _createClass(t,e,o){return e&&_defineProperties(t.prototype,e),o&&_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},_setPrototypeOf(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var o,r=_getPrototypeOf(t);if(e){var n=_getPrototypeOf(this).constructor;o=Reflect.construct(r,arguments,n)}else o=r.apply(this,arguments);return _possibleConstructorReturn(this,o)}}function _possibleConstructorReturn(t,e){if(e&&("object"===_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},_getPrototypeOf(t)}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function ownKeys(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,r)}return o}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(o),!0).forEach((function(e){_defineProperty(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):ownKeys(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function _defineProperty(t,e,o){return(e=_toPropertyKey(e))in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var r=o.call(t,e||"default");if("object"!==_typeof(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_unsupportedIterableToArray(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var o=0,r=new Array(e);o<e;o++)r[o]=t[o];return r}function _iterableToArrayLimit(t,e){var o=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=o){var r,n,i,l,a=[],c=!0,u=!1;try{if(i=(o=o.call(t)).next,0===e){if(Object(o)!==o)return;c=!1}else for(;!(c=(r=i.call(o)).done)&&(a.push(r.value),a.length!==e);c=!0);}catch(t){u=!0,n=t}finally{try{if(!c&&null!=o.return&&(l=o.return(),Object(l)!==l))return}finally{if(u)throw n}}return a}}function _arrayWithHoles(t){if(Array.isArray(t))return t}define("DropdownSelectComponent",["BaseFlatFilterClass","Utility","ui/extendIconUI","BootstrapButtonsComponent","utility/colors","ui/antdReactUI","Base.Panel"],(function(t,e,o,r,n,i,l){var a=e.getReactExport("doDeepSearchByKeywords"),c=new l,u=e.getReactExport("antdUI"),s=e.getReactExport("React"),p=u.Select,d=function(t){return{font:[t[4]?"italic":"normal","normal",t[3]?"bold":"normal",t[0]+"px",t[2]||"sans-serif"].join(" "),color:t[1]}},f=function(t){var o,n,i,l=t.datasets,c=t.selected,u=t.multiple,d=t.placeholder,f=t.type,y=t.notFoundContent,b=t.component,m=_slicedToArray(s.useState(""),2),h=m[0],v=m[1],_=_slicedToArray(s.useState(!1),2),w=_[0],S=_[1],g=s.useRef();h?n=((null===(i=a(l.map((function(t){return _objectSpread({},t)})),h))||void 0===i?void 0:i.tree)||[]).filter((function(t){return t.matched})):n=_toConsumableArray(l);return n=n.map((function(t,e){var o=t.key,r=t.title,n=t.title_matched||r;return""==n&&(n=" "),{label:n,title:r,value:o}})),s.createElement(p,{ref:g,value:c,mode:u?"multiple":void 0,maxTagCount:1,style:{width:"100%"},showArrow:!0,optionFilterProp:"title",notFoundContent:s.createElement(s.Fragment,null,y),showSearch:!0,onSearch:function(t){v(t)},dropdownStyle:{display:w?"block":"none"},getPopupContainer:function(t){return t},onFocus:function(){var t;null===(t=b.componentContainer)||void 0===t||t.css("z-index",3),setTimeout((function(){return S(!0)}),0)},onBlur:function(){var t;null===(t=b.componentContainer)||void 0===t||t.css("z-index",0),S(!1)},placeholder:d||(null==f||null===(o=f[0])||void 0===o?void 0:o.label)||e.locale("others","please select"),onSelect:function(t){v(""),r.prototype.onSelectableNodeClick.call(b,t),setTimeout((function(){var t;return u||(null===(t=g.current)||void 0===t?void 0:t.blur())}),10)},onDeselect:function(t){v(""),r.prototype.onSelectableNodeClick.call(b,t),setTimeout((function(){var t;return u||(null===(t=g.current)||void 0===t?void 0:t.blur())}),10)},options:n})},y=function(t){_inherits(n,t);var o=_createSuper(n);function n(t){var e,r,i;_classCallCheck(this,n);var l=null===(e=(i=o.call(this,t)).componentContainer)||void 0===e||null===(e=e[0])||void 0===e?void 0:e.classList;return null==l||l.add("v-dropdown-selector-component"),null===(r=i.componentContainer)||void 0===r||null===(r=r[0])||void 0===r||r.addEventListener("mousemove",(function(t){return $(t.target).closest(".ant-select-dropdown").length?i.componentContainer.addClass("skipMoving"):i.componentContainer.removeClass("skipMoving")})),i}return _createClass(n,[{key:"tryUpdateCaptionUI",value:function(){return r.prototype.tryUpdateCaptionUI.apply(this,arguments)}},{key:"onApplyPrivateStyle",value:function(t){return i.getAntdSelectorInlineStyle(_objectSpread(_objectSpread({},t),{},{width:this.componentContainer.find(".panel-body").width()}))}},{key:"render",value:function(t){var o,r=t.datasets,n=t.selected,i=this.model.getSelectedFields(!0).type,l=this.options,a=l.multiple,c=(l.searchValue,l.placeholder);return r?s.createElement(f,{datasets:r,selected:n,multiple:a,placeholder:c||(null==i||null===(o=i[0])||void 0===o?void 0:o.label)||e.locale("others","please select"),notFoundContent:this.toLocale("no dropdown data")||e.locale("others","no data"),component:this}):s.createElement(s.Fragment,null)}}]),n}(t);return _defineProperty(y,"type","DropdownSelectComponent"),y.defineFilterComponentStandardedPanel([].concat(_toConsumableArray(y.getGeneralPanelGroup("caption",!0).filter((function(t,e){return 3!=e&&5!=e&&(1==e&&(t.value=!1),!0)}))),[c.label((function(){return this.toLocale("selected style")})),{type:"Font",name:"selected.font",label:function(){return this.toLocale("button font")},value:[13,n.chartDefaultColor(),"",!1,!1],bold:!0,queried:!1,italic:!0,sizes:[10,12,13,14,15,16,18,20,22,24,26,28,32,36,42,48,64,82,108,144],tooltip:function(){return this.toLocale("button font desc")},execute:function(t,e,o){var r=d(t),n=r.font,i=r.color;this.tryUpdateStatus(["selected","font"],n),this.tryUpdateStatus(["selected","color"],i)}},{type:"ColorPicker",name:"selected.background",tooltip:function(){return this.toLocale("button background")},queried:!1,value:"#fff",label:function(){return this.toLocale("button background desc")},execute:function(t){this.tryUpdateStatus(["selected","background"],t)}},{type:"ColorPicker",name:"selected.border.color",tooltip:function(){return this.toLocale("button border color")},queried:!1,value:"rgb(217, 217, 217)",label:function(){return this.toLocale("button border color desc")},execute:function(t){this.tryUpdateStatus(["selected","border","color"],t)}},{type:"Slider",name:"button.radius",value:3,min:0,max:60,step:1,formatter:function(t){return t+"px"},queried:!1,label:function(){return this.toLocale("button border radius")},tooltip:function(){return this.toLocale("button border radius desc")},execute:function(t){this.tryUpdateStatus(["radius"],t)}},{type:"TextInput",name:"button.placeholder",value:"",queried:!1,label:function(){return this.toLocale("button placeholder")},tooltip:function(){return this.toLocale("button placeholder desc")},execute:function(t){this.tryUpdateStatus(["placeholder"],t)}},c.line(),c.label((function(){return this.toLocale("dropdown style")})),{type:"Font",name:"_listFont",label:e.locale("components","system default","lists","list font"),value:[13,n.chartDefaultColor(),"",!1,!1],bold:!0,queried:!1,italic:!0,sizes:[12,13,14,15,16,18,20,22,24,26,28,32,36,42,48,64,82,108,144],tooltip:e.locale("components","system default","lists","list font description"),execute:function(t){var e=d(t),o=e.font,r=e.color;this.tryUpdateStatus(["dropdown","font"],o),this.tryUpdateStatus(["dropdown","color"],r)}},{type:"ColorPicker",name:"actived.color",tooltip:function(){return this.toLocale("dropdown actived color desc")},queried:!1,value:n.chartDefaultColor(),label:function(){return this.toLocale("dropdown actived color")},execute:function(t){this.tryUpdateStatus(["dropdown","actived","color"],t)}},{type:"ColorPicker",name:"actived.gb.color",tooltip:function(){return this.toLocale("dropdown actived background desc")},queried:!1,value:"#e6f7ff",label:function(){return this.toLocale("dropdown actived background")},execute:function(t){this.tryUpdateStatus(["dropdown","actived","background"],t)}}])),y.registerComponent({name:function(){return this.toLocale("component name")},tooltip:function(){return this.toLocale("component tooltip")},desc:function(){return this.toLocale("component desc")},version:"1.0.0",classify:"_filter",icon:o.getDropdownIcon({}),orderIndex:1,queryRequired:!0,editPointEventNone:!0,filterable:!0,alwaysALLMember:!0}),y}));
//# sourceMappingURL=DropdownSelectComponent.js.map