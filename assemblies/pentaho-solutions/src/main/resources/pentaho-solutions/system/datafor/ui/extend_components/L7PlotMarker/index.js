"use strict";function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],u=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _construct(e,t,r){return _construct=_isNativeReflectConstruct()?Reflect.construct.bind():function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&_setPrototypeOf(o,r.prototype),o},_construct.apply(null,arguments)}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_toPropertyKey(n.key),n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _get(){return _get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=_superPropBase(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},_get.apply(this,arguments)}function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_setPrototypeOf(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var r,n=_getPrototypeOf(e);if(t){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_getPrototypeOf(e)}function _classPrivateMethodInitSpec(e,t){_checkPrivateRedeclaration(e,t),t.add(e)}function _classPrivateFieldInitSpec(e,t,r){_checkPrivateRedeclaration(e,t),t.set(e,r)}function _checkPrivateRedeclaration(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _defineProperty(e,t,r){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"===_typeof(t)?t:String(t)}function _toPrimitive(e,t){if("object"!==_typeof(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function _classPrivateMethodGet(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function _classPrivateFieldSet(e,t,r){return _classApplyDescriptorSet(e,_classExtractFieldDescriptor(e,t,"set"),r),r}function _classApplyDescriptorSet(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}function _classPrivateFieldGet(e,t){return _classApplyDescriptorGet(e,_classExtractFieldDescriptor(e,t,"get"))}function _classExtractFieldDescriptor(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}function _classApplyDescriptorGet(e,t){return t.get?t.get.call(e):t.value}define("L7PlotMarker",["L7PlotBase","Kit","underscore","Utility","utility/runtime","Base.Panel","ui/extendIconUI"],(function(e,t,r,n,o,a,i){var l,u=function(e){return!!String(e).match(/^\[Measures\]\.\[/)},s=(n.getReactExport("React"),new a),c={key:"UNKNOWN_ICON_L7PLOT",value:n.createImageResource({type:"image/svg+xml",content:'<svg t="1694179728246" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="6638" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><path d="M554.666667 768v85.333333h-85.333334v-85.333333h85.333334zM512 170.666667a213.333333 213.333333 0 0 1 213.333333 213.333333v42.666667a213.418667 213.418667 0 0 1-170.624 209.066666L554.666667 725.333333h-85.333334v-170.666666h42.666667a128 128 0 0 0 128-128V384a128 128 0 1 0-256 0v42.666667H298.666667V384a213.333333 213.333333 0 0 1 213.333333-213.333333z" fill="#444444" p-id="6639"></path></svg>',name:"UNKNOWN_ICON_L7PLOT.svg"},!0)},p=e.getGeneralPanelGroup("action"),d=o.getMarkerSizeNormalGenerator(),f=new WeakMap,y=new WeakMap,v=new WeakSet,h=new WeakSet,m=function(a){_inherits(l,a);var i=_createSuper(l);function l(){var e;return _classCallCheck(this,l),_classPrivateMethodInitSpec(_assertThisInitialized(e=i.apply(this,arguments)),h),_classPrivateMethodInitSpec(_assertThisInitialized(e),v),_classPrivateFieldInitSpec(_assertThisInitialized(e),f,{writable:!0,value:!1}),_classPrivateFieldInitSpec(_assertThisInitialized(e),y,{writable:!0,value:!1}),e.tryUpdateStatus(["timestamp"],Date.now()),e}return _createClass(l,[{key:"onComponentPlotAreaClickEvent",value:function(e){var t=e.data.originalEvent,r=this.l7chart,n=r.dotLayer.layer.getCurrentPickId(),a=r.dotLayer.layer.layerPickService.getFeatureById(n);if(a){var i=o.isCtrlKeyPressed(t,this);return this.toUpdateDataJoinPoint({data:{levels:a.levels}},i,this.drillable).then((function(e){return e.filter((function(e){var t;return Array.isArray(null===(t=e.data)||void 0===t?void 0:t.levels)})).length>0?e:null}))}return this.enlarge?[]:null}},{key:"onComponentLinkOutput",value:function(e){this.toApplySeriesOptions(this.getPanelControlValue("style","series.type.mixed"))}},{key:"onComponentClear",value:function(){this.tryUpdateStatus(["source","data"],[])}},{key:"onComponentResize",value:function(){_get(_getPrototypeOf(l.prototype),"onComponentResize",this).call(this)}},{key:"dataFormat",value:function(e){var t,r=this,n=this.model.getSelectedFields();n.tooltip=null===(t=this.model.getSelectedFields(!0))||void 0===t||null===(t=t.tooltip)||void 0===t?void 0:t.map((function(e){var t;return u(e.id)?(null===(t=e.extend_properties)||void 0===t||null===(t=t.toAggregateAs)||void 0===t?void 0:t.uniqueName)||e.uuid||e.id:e.uuid||e.id}));var o=n.lng,a=n.lat;return new Promise((function(t){o&&a?t(e):r.geocoding(e,(function(n,o,a){r.firstLoading=!1,a?t(e):r.toMarkpoint(n)}))})).then((function(e){return r.toMarkpoint(e)}))}},{key:"toMarkpoint",value:function(e){var t,r=this,n=this.l7chart,o=this.model.getSelectedFields();o.tooltip=null===(t=this.model.getSelectedFields(!0))||void 0===t||null===(t=t.tooltip)||void 0===t?void 0:t.map((function(e){var t;return u(e.id)?(null===(t=e.extend_properties)||void 0===t||null===(t=t.toAggregateAs)||void 0===t?void 0:t.uniqueName)||e.uuid||e.id:e.uuid||e.id}));var a=_classPrivateFieldGet(this,f)||_classPrivateFieldGet(this,y);return a&&(_classPrivateFieldSet(this,f,!1),_classPrivateFieldSet(this,y,!1)),this.doTask(_objectSpread(_objectSpread({},e),{},{eventType:"dataFormat",fields:o,autoAdjust:a,color:__ENV.colors[0]}),!1).then((function(e){var t=e.eventType,o=e.data,a=e.tipArray,i=e.typesArray,l=e.bounds;if("dataFormat"==t&&(r.tryUpdateStatus(["source","data"],o),r.tryUpdateStatus(["tooltip","items"],a),r.typesArray=i,null!=l&&l.length))try{var u;AMap&&(null==n||null===(u=n.getMap())||void 0===u||u.setBounds(_construct(AMap.Bounds,_toConsumableArray(l)),!1,[40,40,40,40]))}catch(e){console.log("Auto adjust failed",e.message)}}))}},{key:"onExecuteJumpEvent",value:function(e,a,i,l){var u,s=this;if(e){var c=JSON.parse(this.response)||{},p=this.model.getSavedJumpOptions(null,!0),d=c.color,f=void 0===d?[]:d,y=c.tooltips,v=void 0===y?[]:y,h=this.model.getSelectedFields().measure,m=o.get_CONST_DIM_MEASUER_TYPE(),_=function(e,t){var r=null==t?void 0:t.find((function(t){var r;return(null===(r=t.toLink)||void 0===r?void 0:r.sort((function(e,t){return e-t})).join("..."))==e}));return r?Object.keys(r).filter((function(e){return"toLink"!=e})).reduce((function(e,t){var n,o,a;return e.push({value:null===(n=r[t])||void 0===n?void 0:n.value,levelCaption:null===(o=r[t])||void 0===o?void 0:o.caption,uniqueName:null===(a=r[t])||void 0===a?void 0:a.value,level:t,hierarchy:String(t).replace(/(^\[.*\])\.\[.*\]$/,"$1"),axis:m}),e}),[]):null},g=n.getSequenceKeys((null==e||null===(u=e.data)||void 0===u||null===(u=u[0])||void 0===u||null===(u=u.data)||void 0===u?void 0:u.levels)||[]),b=_(g,v),S=_(g,f);return h?(function(n,o,i){var u=null==p?void 0:p.find((function(e){return e.uniqueName==n})),c=_objectSpread({},e);if(!u)return s;var d=u.options;c.levels=c.levels||[],(null==o?void 0:o.length)>0&&(c.levels=c.levels.concat(o)),(null==i?void 0:i.length)>0&&(c.levels=c.levels.concat(i)),c.levels=r.uniq(c.levels,(function(e){return e.uniqueName})),t.openLinkedPage({savedJumpOptions:_objectSpread({},d),component:s,params:{message:c},event:a},l)}(h,b,S),this):this}}},{key:"onComponenetDataFormat",value:function(e,t){var r=this;return this.executeAfterResourceLoaded((function(){return r.l7chart})).then((function(){return r.dataFormat(e)}))}},{key:"onApplyConditionColor",value:function(e,t){var r,a=this;if(this.model.getSelectedFields().type)return this;if(!o.checkExtroValid(e,this,!0))return this;if(null==e||null===(r=e.based)||void 0===r||!r.id)return this;var i="[Measures].[".concat(e.based.id,"]");return i?n.doTask({type:"tryGetConditionColor",data:{datasets:this.options.source.data,configs:e,colorKey:i}}).then((function(e){a.tryUpdateStatus(["source","data"],e)})):this}},{key:"onComponenetShouldDrill",value:function(){_classPrivateFieldSet(this,f,!0)}},{key:"onComponenetShouldDrillReset",value:function(){_classPrivateFieldSet(this,y,!0)}},{key:"toApplySeriesOptions",value:function(e){var t,r,n,o,a=this.model.getSelectedFields().type,i=null===(t=__ENV.colors)||void 0===t?void 0:t.map((function(e){return e})),l=i.length,u=[],s=[];0===(null===(r=e)||void 0===r?void 0:r.length)&&(e=null===(o=this.typesArray)||void 0===o?void 0:o.map((function(e){return{title:e}})));null===(n=e)||void 0===n||n.forEach((function(e,t){var r=e.title,n=e.key,o=e.value||{},a=o.color,c=o.icon;u.push({key:n||r,title:r,value:a||i[t%l]}),c&&s.push({key:n||r,title:r,value:c})})),_classPrivateMethodGet(this,v,_).call(this,s),s.length&&a?this.tryUpdateStatus(["color"],"#fff"):_classPrivateMethodGet(this,h,g).call(this,u)}},{key:"onComponentRendered",value:function(){var e=this.options;if(!this.firstLoading)try{var t,r=["cylinder","squareColumn","hexagonColumn"].indexOf(e.dataforL7plotIcon)>=0,n=e.dataforPlainMarkerSize,o=e.datafor3dMarkerSize,a=_objectSpread(_objectSpread({},e),{},{size:_objectSpread(_objectSpread({},e.size),{},{value:function(e){var t=e.sizeRatio;return r?[o,o,d.getValue(n,t)]:d.getValue(n,t)}})});null===(t=this.l7chart)||void 0===t||t.update(a)}catch(e){console.log(e.stack)}}}],[{key:"instanceStatusDef",value:function(){return _objectSpread(_objectSpread({},e.instanceStatusDef.apply(this,Array.from(arguments))),{},{dataforPlainMarkerSize:d.value,datafor3dMarkerSize:5})}}]),l}(e);function _(e){var t=this;if(this.model.getSelectedFields().type){var r=e||[],o=this.l7chart.scene,a=this.id,i={},l=null==r?void 0:r.map((function(e){var r=e.title,l=e.value||{},u=l.type,s=l.content,c=l.name;if(u&&s){var p=n.createImageResource({type:u,content:s,name:c},!0);return i[r]="".concat(a,"_").concat(r),{id:i[r],image:p}}return t.unregisterImage(r),null==o||o.removeImage(r),null})).filter((function(e){return!!e})).concat({id:c.key,image:c.value});l.forEach((function(e){var t=e.id;null==o||o.removeImage(t)})),1===l.length?(this.tryUpdateStatus(["dataforL7plotMarkers"],0),this.tryUpdateStatus(["shape","value"],(function(){return t.options.dataforL7plotIcon}))):(this.registerImages(l),this.l7chart.registerResources(),this.tryUpdateStatus(["dataforL7plotMarkers"],l.length-1),this.tryUpdateStatus(["shape","value"],(function(e){var t=e.typecode;return i.hasOwnProperty(t)?i[t]:c.key})))}else this.tryUpdateStatus(["shape","value"],(function(){return t.options.dataforL7plotIcon}))}function g(e){var t=this.model.getSelectedFields().type,r=this.getOutputLinkPoints().map((function(e){return e.name})),o=!!this.options.source.data.map((function(e){var t;return(null===(t=e.levels)||void 0===t||null===(t=t.filter((function(e){return"dimMeasure"!=e.axis})).map((function(e){return e.uniquename})))||void 0===t?void 0:t.join("..."))||null})).filter((function(e){return!!e})).find((function(e){return r.indexOf(e)>=0})),a=__ENV.colors[0],i=__ENV.colors,l=.8,u=i.length;if(t){var s={};(e||[]).forEach((function(e){s[e.title]=e.value})),o?(this.tryUpdateStatus(["color","field"],"typecodeMixed"),this.tryUpdateStatus(["color","value"],(function(e){var t=_slicedToArray(e.typecodeMixed.split(":::"),2),o=t[0],i=t[1];return r.indexOf(o)>=0?n.getOpacityColor(s[i]||a,l):n.getOpacityColor(s[i]||a,.16000000000000003)}))):(this.tryUpdateStatus(["color","field"],"typecode"),this.tryUpdateStatus(["color","value"],(function(e){var t=e.typecode;if(s.hasOwnProperty(t))return n.getOpacityColor(s[t],l);var r=i[Object.keys(s).length%u];return s[t]=r,n.getOpacityColor(r,l)})))}else this.tryUpdateStatus(["color","field"],"mixed"),o?this.tryUpdateStatus(["color","value"],(function(e){var t=_slicedToArray(e.mixed.split(":::"),2),o=t[0],a=t[1];return r.indexOf(String(o).replace(/~/,"..."))>=0?n.getOpacityColor(a,l):n.getOpacityColor(a,.16000000000000003)})):this.tryUpdateStatus(["color","value"],(function(e){var t=_slicedToArray(e.mixed.split(":::"),2)[1];return n.getOpacityColor(t,l)}))}return _defineProperty(m,"type","L7PlotMarker"),m.registerComponent(_objectSpread(_objectSpread({name:function(){return this.toLocale("component name")},version:"1.0.0",tooltip:function(){return this.toLocale("component name tooltip")},desc:function(){return this.toLocale("component desc")}},m.getL7categoryClassify()),{},{classifyPriority:null,icon:i.getGistagMapIcon(),orderIndex:5,task:!0,queryRequired:!0,editPointEventNone:!0})),p.splice(4,0,s.label((function(){return this.toLocale("map type options")})),m.inheritPanelControl("common","engine.type"),s.line()),m.extendComponentModelProperties({entranceConstraintsForLinkConfs:["size.measure"]}),m.defineComponentPanel([{label:m.toLocale(["data panel"])||n.locale("panel","data"),name:"data",active:!0,datasets:_toConsumableArray(m.getDataPanelSeries())},{label:m.toLocale(["style panel"])||n.locale("panel","styles"),name:"style",datasets:[].concat(_toConsumableArray(m.getGeneralPanelGroup("caption",!0).map((function(e){return"title.on"===e.name?Object.assign(e,{value:!1}):e}))),_toConsumableArray(m.getGeneralPanelGroup("frameset",!0)),_toConsumableArray(s.getDynamicDataLabelGroup((function(){var e=this,t=this.model.getSelectedFields(!0),n=t.name,o=t.type,a=t.measure,i=t.tooltip;return r.uniq([].concat(_toConsumableArray(n||[]),_toConsumableArray(o||[]),_toConsumableArray(a||[]),_toConsumableArray(i||[])).filter((function(e){return!!e})),(function(e){return e.uuid})).map((function(t){var r=t.id||t.uniqueName,n=e.model.getNodeCaption(r);return{value:n,label:n}}))}),{enable:!1,field:m.instanceStatusDef().dataforLabelField,style:{fontSize:12,fill:"#fff",fontFamily:"sans-serif"}},(function(e){var t=e.enable,r=e.field,n=e.style,o=n.fontSize,a=n.fill,i=n.fontFamily;t?(this.tryUpdateStatus(["label","field"],r),this.tryUpdateStatus(["label","value"],(function(e){return e[r]})),this.tryUpdateStatus(["dataforLabelField"],r)):this.tryUpdateStatus(["label","field"],null),this.tryUpdateStatus(["label","style"],{fontSize:o,fill:a,fontFamily:i,stroke:a,strokeOpacity:0})}))),[s.line(),s.label(m.toLocale(["marker settings"])),s.colors_def((function(){return this.toLocale("color options")||n.locale("panel","style panel","universal","color options")}),(function(){return this.toLocale("color options desc")||n.locale("panel","style panel","universal","color options desc")}),!1,(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t[0],o=t[1],a=t[3],i=n.getSelectedFields().type,l=a.hasOwnProperty(o.fullKey)?a[o.fullKey]:{};return i?null:l})),{type:"SingleSelect",name:"default.marker",label:m.toLocale("marker")||"默认标注",tooltip:m.toLocale("marker desc")||"默认标注物",available:["circle","triangle","square","rhombus","pentagon","hexagram","octogon","vesica","cylinder","squareColumn","hexagonColumn"].map((function(e,t){return{value:e,label:function(){return this.toLocale(["marker type",e])||e}}})),value:m.instanceStatusDef().dataforL7plotIcon,singleRequireSelected:!0,mul:!1,search:!1,execute:function(e){var t=Array.isArray(e)?e[0]:e;this.tryUpdateStatus(["dataforL7plotIcon"],t),this.options.dataforL7plotMarkers>0||this.tryUpdateStatus(["shape","value"],(function(){return t}))}},{type:"Slider",name:"3d.radius",min:1,max:20,value:5,toListen:["default.marker"],formatter:function(e){return e},step:1,label:function(){return this.toLocale("3d radius")||"3D半径"},tooltip:function(){return this.toLocale("3d radius desc")||"3D半径描述"},chainLinker:function(e,t,r){var n=e.value,o=_slicedToArray(void 0===n?[]:n,1)[0];["cylinder","squareColumn","hexagonColumn"].indexOf(o)<0?null==r||r.hide():null==r||r.show()},execute:function(e,t,r){this.tryUpdateStatus(["datafor3dMarkerSize"],e)},init:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t[0],o=t[2],a=n.getCustomizations(),i=a["style.3d.radius"],l=void 0===i?5:i,u=a["style.default.marker"],s=_slicedToArray(void 0===u?[m.instanceStatusDef().dataforL7plotIcon]:u,1)[0],c=["cylinder","squareColumn","hexagonColumn"].indexOf(s)<0;return setTimeout((function(){c?null==o||o.hide():null==o||o.show()}),0),c?null:l}},m.inheritPanelControl("common","series.type.mixed",null,null,{execute:function(e){this.toApplySeriesOptions(e)},init:function(){for(var e,t,r=null===(e=__ENV.colors)||void 0===e?void 0:e.map((function(e){return e})),n=r.length,o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];var l=a[0],u=a[1],s=a[3],c=l.getSelectedFields().type,p=s.hasOwnProperty(u.fullKey)?s[u.fullKey]:[];return c&&0===p.length&&null!==(t=this.typesArray)&&void 0!==t&&t.length&&(p=this.typesArray.map((function(e){return{title:e}}))),c?p.map((function(e,t){return e.value=e.value||{},e.value.color=e.value.color||r[t%n],e})):null}}),{type:"Slider",name:"marker.size",min:d.min,max:d.max,value:d.value,formatter:d.formatter,step:d.step,label:function(){return this.toLocale("marker control size")||"Min size"},tooltip:function(){return this.toLocale("marker control size desc")||"Min size desc"},execute:function(e,t,r){this.model.getSelectedFields().measure;this.tryUpdateStatus(["dataforPlainMarkerSize"],e)}},{type:"ColorPicker",name:"marker.hover.color",tooltip:function(){return this.toLocale("marker hover color desc")||"Hover color desc"},value:(null===(l=m.instanceStatusDef().state)||void 0===l||null===(l=l.active)||void 0===l?void 0:l.color)||"green",label:function(){return this.toLocale("marker hover color")||"Hover color"},execute:function(e,t,r){this.tryUpdateStatus(["state","active","color"],e)}},s.line(),s.label((function(){return this.toLocale("map options")||"Map options"})),m.inheritPanelControl("common","auto.fit"),m.inheritPanelControl("common","map.theme"),m.inheritPanelControl("common","zoom.controls.show"),m.inheritPanelControl("common","zoom.controls.position"),m.inheritPanelControl("common","scale.controls.show"),m.inheritPanelControl("common","scale.controls.position"),s.line()],_toConsumableArray(m.getGeneralPanelGroup("toolbar")))},{label:n.locale("panel","actions"),name:"action",datasets:_toConsumableArray(p)}]),m}));
//# sourceMappingURL=L7PlotMarker.js.map